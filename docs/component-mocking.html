<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Component Mocking - @rageltd/bun-test-utils</title>
    <meta
      name="description"
      content="Component Mocking documentation for @rageltd/bun-test-utils"
    />
    <link rel="stylesheet" href="css/gitbook.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github.min.css"
    />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/typescript.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/javascript.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/bash.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/json.min.js"></script>
  </head>
  <body>
    <button class="mobile-toggle">☰</button>

    <div class="gitbook-container">
      <aside class="sidebar">
        <div class="sidebar-header">
          <h1 class="sidebar-title"><a href="https://github.com/rageltd/bun-test-utils" target="_blank" rel="noopener noreferrer" style="color: inherit; text-decoration: none;">@rageltd/bun-test-utils</a></h1>
          <p class="sidebar-subtitle">Test utilities for Bun projects</p>
        </div>

        <div class="search-container">
          <input
            type="text"
            class="search-input"
            placeholder="Search documentation..."
          />
        </div>

        <nav class="nav-menu">
          <div class="nav-section">
            <ul class="nav-subsection">
              <li class="nav-item">
                <a href="index.html" class="nav-link">Introduction</a>
              </li>
            </ul>
          </div>
          <div class="nav-section">
            <h3 class="nav-section-title">Getting Started</h3>
            <ul class="nav-subsection">
              <li class="nav-item">
                <a href="installation.html" class="nav-link">Installation</a>
              </li>
              <li class="nav-item">
                <a href="quick-start.html" class="nav-link">Quick Start</a>
              </li>
            </ul>
          </div>
          <div class="nav-section">
            <h3 class="nav-section-title">API Reference</h3>
            <ul class="nav-subsection">
              <li class="nav-item">
                <a href="async-utilities.html" class="nav-link"
                  >Async Utilities</a
                >
              </li>
              <li class="nav-item">
                <a href="mock-utilities.html" class="nav-link"
                  >Mock Utilities</a
                >
              </li>
              <li class="nav-item">
                <a href="hook-mocking.html" class="nav-link">Hook Mocking</a>
              </li>
              <li class="nav-item">
                <a href="component-mocking.html" class="nav-link active"
                  >Component Mocking</a
                >
              </li>
              <li class="nav-item">
                <a href="graphql-mocking.html" class="nav-link"
                  >GraphQL Mocking</a
                >
              </li>
              <li class="nav-item">
                <a href="module-mocking.html" class="nav-link"
                  >Module Mocking</a
                >
              </li>
              <li class="nav-item">
                <a href="partial-mocks.html" class="nav-link">Partial Mocks</a>
              </li>
              <li class="nav-item">
                <a href="spy-utilities.html" class="nav-link">Spy Utilities</a>
              </li>
              <li class="nav-item">
                <a href="cleanup-utilities.html" class="nav-link"
                  >Cleanup Utilities</a
                >
              </li>
            </ul>
          </div>
          <div class="nav-section">
            <h3 class="nav-section-title">Guides</h3>
            <ul class="nav-subsection">
              <li class="nav-item">
                <a href="testing-patterns.html" class="nav-link"
                  >Testing Patterns</a
                >
              </li>
              <li class="nav-item">
                <a href="working-with-bun.html" class="nav-link"
                  >Working with Bun</a
                >
              </li>
              <li class="nav-item">
                <a href="common-issues.html" class="nav-link">Common Issues</a>
              </li>
              <li class="nav-item">
                <a href="migration-guide.html" class="nav-link"
                  >Migration Guide</a
                >
              </li>
            </ul>
          </div>
          <div class="nav-section">
            <h3 class="nav-section-title">Examples</h3>
            <ul class="nav-subsection">
              <li class="nav-item">
                <a href="basic-testing.html" class="nav-link">Basic Testing</a>
              </li>
              <li class="nav-item">
                <a href="react-components.html" class="nav-link"
                  >React Components</a
                >
              </li>
              <li class="nav-item">
                <a href="graphql-testing.html" class="nav-link"
                  >GraphQL Testing</a
                >
              </li>
              <li class="nav-item">
                <a href="module-mocking-examples.html" class="nav-link"
                  >Module Mocking</a
                >
              </li>
            </ul>
          </div>
          <div class="nav-section">
            <h3 class="nav-section-title">Contributing</h3>
            <ul class="nav-subsection">
              <li class="nav-item">
                <a href="development-setup.html" class="nav-link"
                  >Development Setup</a
                >
              </li>
              <li class="nav-item">
                <a href="semantic-commits.html" class="nav-link"
                  >Semantic Commits</a
                >
              </li>
              <li class="nav-item">
                <a href="release-process.html" class="nav-link"
                  >Release Process</a
                >
              </li>
            </ul>
          </div>
        </nav>
      </aside>

      <main class="main-content">
        <div class="content-wrapper">
          <h1>Component Mocking</h1>

          <p></p>
            The component mocking module provides utilities for creating mock
            React components in your tests, allowing you to isolate the
            component under test from its dependencies.
          </p>

          <h2 id="createmockcomponent">createMockComponent</h2>

          <h3 id="signature">Signature</h3>

          <pre><code class="language-typescript">function createMockComponent(componentName: string):
  (props: Record&lt;string, unknown&gt;) => string</code></pre>

          <h3 id="description">Description</h3>

          <p>
            Creates a mock React component that renders as a simple string
            representation. This is particularly useful for:
          </p>

          <ul>
            <li>Isolating components from complex child components</li>
            <li>Testing component behavior without rendering dependencies</li>
            <li>Speeding up tests by avoiding heavy component trees</li>
            <li>Focusing tests on the component's logic rather than UI</li>
          </ul>

          <h3 id="parameters">Parameters</h3>

          <table>
            <thead>
              <tr>
                <th>Parameter</th>
                <th>Type</th>
                <th>Description</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><code>componentName</code></td>
                <td><code>string</code></td>
                <td>Name of the component to create a mock for</td>
              </tr>
            </tbody>
          </table>

          <h3 id="returns">Returns</h3>

          <p>
            <code>(props: Record&lt;string, unknown&gt;) => string</code> - A
            mock component function that renders as a string
          </p>

          <h3 id="examples">Examples</h3>

          <h4 id="basic-component-mocking">Basic Component Mocking</h4>

          <pre><code class="language-typescript">import { createMockComponent, createModuleMocker } from '@rageltd/bun-test-utils';
import { test, expect, beforeEach, afterAll } from 'bun:test';

const mockModules = createModuleMocker();

test('mocks a simple component', async () => {
  await mockModules.mock('@/components/Button', () => ({
    default: createMockComponent('Button')
  }));

  const { default: Button } = await import('@/components/Button');
  const result = Button({ children: 'Click me' });

  expect(result).toBe('&lt;Button data-testid="mock-button"&gt;Click me&lt;/Button&gt;');
});</code></pre>

          <h4 id="mocking-complex-components">Mocking Complex Components</h4>

          <pre><code class="language-typescript">import { render, screen } from '@testing-library/react';
import { createMockComponent, createModuleMocker } from '@rageltd/bun-test-utils';

const mockModules = createModuleMocker();

describe('UserProfile component', () => {
  beforeEach(async () => {
    // Mock child components
    await mockModules.mock('@/components/Avatar', () => ({
      default: createMockComponent('Avatar')
    }));

    await mockModules.mock('@/components/ContactInfo', () => ({
      default: createMockComponent('ContactInfo')
    }));
  });

  afterAll(() => {
    mockModules.restoreAll();
  });

  test('renders with mocked children', async () => {
    const { UserProfile } = await import('@/components/UserProfile');

    render(&lt;UserProfile userId={1} /&gt;);

    // Can test the main component logic without child complexity
    expect(screen.getByTestId('mock-avatar')).toBeInTheDocument();
    expect(screen.getByTestId('mock-contactinfo')).toBeInTheDocument();
  });
});</code></pre>

          <h4 id="mocking-third-party-components">
            Mocking Third-Party Components
          </h4>

          <pre><code class="language-typescript">import { createMockComponent } from '@rageltd/bun-test-utils';

describe('Dashboard with third-party components', () => {
  beforeEach(async () => {
    // Mock heavy third-party components
    await mockModules.mock('react-chartjs-2', () => ({
      Chart: createMockComponent('Chart'),
      Line: createMockComponent('LineChart'),
      Bar: createMockComponent('BarChart')
    }));

    await mockModules.mock('@mui/material', () => ({
      DataGrid: createMockComponent('DataGrid'),
      Card: createMockComponent('Card'),
      CardContent: createMockComponent('CardContent')
    }));
  });

  test('renders dashboard structure', async () => {
    const { Dashboard } = await import('@/components/Dashboard');

    render(&lt;Dashboard /&gt;);

    expect(screen.getByTestId('mock-linechart')).toBeInTheDocument();
    expect(screen.getByTestId('mock-datagrid')).toBeInTheDocument();
  });
});</code></pre>

          <h4 id="testing-component-props">Testing Component Props</h4>

          <pre><code class="language-typescript">import { createMockComponent } from '@rageltd/bun-test-utils';

test('mock component receives props', async () => {
  const MockButton = createMockComponent('Button');

  const result = MockButton({
    variant: 'primary',
    size: 'large',
    onClick: () => {},
    children: 'Submit'
  });

  // The mock includes data-testid for easy testing
  expect(result).toContain('data-testid="mock-button"');
  expect(result).toContain('Submit');
});</code></pre>

          <h4 id="self-closing-components">Self-Closing Components</h4>

          <pre><code class="language-typescript">import { createMockComponent } from '@rageltd/bun-test-utils';

test('handles components without children', async () => {
  const MockIcon = createMockComponent('Icon');

  const result = MockIcon({
    name: 'home',
    size: 24
  });

  // Self-closing for components without children
  expect(result).toBe('&lt;Icon data-testid="mock-icon" /&gt;');
});</code></pre>

          <h2 id="best-practices">Best Practices</h2>

          <h3 id="use-descriptive-component-names">
            1. Use Descriptive Component Names
          </h3>

          <p>
            Use clear, descriptive names that match your actual component names:
          </p>

          <div class="callout callout-success">
            <pre><code class="language-typescript">// ✅ Clear and descriptive
createMockComponent('UserAvatar')
createMockComponent('NavigationMenu')
createMockComponent('ProductCard')</code></pre>
          </div>

          <div class="callout callout-error">
            <pre><code class="language-typescript">// ❌ Vague or unclear
createMockComponent('Comp')
createMockComponent('Thing')
createMockComponent('UI')</code></pre>
          </div>

          <h3 id="mock-at-the-right-level">2. Mock at the Right Level</h3>

          <p>
            Mock components that are complex or outside the scope of your test:
          </p>

          <div class="callout callout-success">
            <pre><code class="language-typescript">// ✅ Mock complex/external components
await mockModules.mock('react-chartjs-2', () => ({
  Chart: createMockComponent('Chart')
}));

// ✅ Mock components that make API calls
await mockModules.mock('@/components/DataFetcher', () => ({
  default: createMockComponent('DataFetcher')
}));</code></pre>
          </div>

          <div class="callout callout-warning">
            <pre><code class="language-typescript">// ⚠️ Don't mock simple components you want to test
// This might hide integration issues
await mockModules.mock('@/components/Button', () => ({
  default: createMockComponent('Button')
}));</code></pre>
          </div>

          <h3 id="combine-with-module-mocking">
            3. Combine with Module Mocking
          </h3>

          <p>Use component mocking together with module mocking patterns:</p>

          <pre><code class="language-typescript">import { createModuleMocker, createMockComponent } from '@rageltd/bun-test-utils';

const mockModules = createModuleMocker();

beforeEach(async () => {
  await mockModules.mock('@/components', () => ({
    Header: createMockComponent('Header'),
    Footer: createMockComponent('Footer'),
    Sidebar: createMockComponent('Sidebar')
  }));
});

afterAll(() => {
  mockModules.restoreAll();
});</code></pre>

          <h3 id="use-data-testid-for-assertions">
            4. Use data-testid for Assertions
          </h3>

          <p>
            Mock components automatically include data-testid attributes for
            easy testing:
          </p>

          <pre><code class="language-typescript">test('finds mocked components', () => {
  const MockCard = createMockComponent('ProductCard');

  render(&lt;div dangerouslySetInnerHTML={{ __html: MockCard({}) }} /&gt;);

  expect(screen.getByTestId('mock-productcard')).toBeInTheDocument();
});</code></pre>

          <h2 id="advanced-patterns">Advanced Patterns</h2>

          <h3 id="conditional-mocking">Conditional Mocking</h3>

          <p>Mock components conditionally based on test scenarios:</p>

          <pre><code class="language-typescript">describe('PaymentForm', () => {
  beforeEach(async () => {
    const shouldMockStripe = process.env.MOCK_STRIPE === 'true';

    if (shouldMockStripe) {
      await mockModules.mock('@stripe/react-stripe-js', () => ({
        CardElement: createMockComponent('StripeCardElement'),
        Elements: createMockComponent('StripeElements')
      }));
    }
  });
});</code></pre>

          <h3 id="mocking-component-libraries">Mocking Component Libraries</h3>

          <p>Create comprehensive mocks for entire component libraries:</p>

          <pre><code class="language-typescript">// Mock entire Ant Design library
await mockModules.mock('antd', () => ({
  Button: createMockComponent('AntButton'),
  Form: createMockComponent('AntForm'),
  Input: createMockComponent('AntInput'),
  Select: createMockComponent('AntSelect'),
  Table: createMockComponent('AntTable'),
  Modal: createMockComponent('AntModal')
}));</code></pre>

          <h3 id="testing-component-composition">
            Testing Component Composition
          </h3>

          <p>Test how components work together without rendering complexity:</p>

          <pre><code class="language-typescript">describe('PageLayout composition', () => {
  beforeEach(async () => {
    await mockModules.mock('@/components', () => ({
      Header: createMockComponent('Header'),
      Navigation: createMockComponent('Navigation'),
      Content: createMockComponent('Content'),
      Footer: createMockComponent('Footer')
    }));
  });

  test('renders all layout components', async () => {
    const { PageLayout } = await import('@/components/PageLayout');

    render(&lt;PageLayout&gt;Test content&lt;/PageLayout&gt;);

    expect(screen.getByTestId('mock-header')).toBeInTheDocument();
    expect(screen.getByTestId('mock-navigation')).toBeInTheDocument();
    expect(screen.getByTestId('mock-content')).toBeInTheDocument();
    expect(screen.getByTestId('mock-footer')).toBeInTheDocument();
  });
});</code></pre>

          <h2 id="common-use-cases">Common Use Cases</h2>

          <h3 id="testing-layout-components">Testing Layout Components</h3>

          <pre><code class="language-typescript">describe('AppLayout', () => {
  beforeEach(async () => {
    await mockModules.mock('@/components/layout', () => ({
      Header: createMockComponent('Header'),
      Sidebar: createMockComponent('Sidebar'),
      MainContent: createMockComponent('MainContent')
    }));
  });

  test('renders layout structure', async () => {
    const { AppLayout } = await import('@/components/AppLayout');
    render(&lt;AppLayout /&gt;);

    expect(screen.getByTestId('mock-header')).toBeInTheDocument();
    expect(screen.getByTestId('mock-sidebar')).toBeInTheDocument();
    expect(screen.getByTestId('mock-maincontent')).toBeInTheDocument();
  });
});</code></pre>

          <h3 id="testing-form-components">Testing Form Components</h3>

          <pre><code class="language-typescript">describe('ContactForm', () => {
  beforeEach(async () => {
    await mockModules.mock('@/components/form', () => ({
      TextInput: createMockComponent('TextInput'),
      EmailInput: createMockComponent('EmailInput'),
      TextArea: createMockComponent('TextArea'),
      SubmitButton: createMockComponent('SubmitButton')
    }));
  });

  test('renders form fields', async () => {
    const { ContactForm } = await import('@/forms/ContactForm');
    render(&lt;ContactForm /&gt;);

    expect(screen.getByTestId('mock-textinput')).toBeInTheDocument();
    expect(screen.getByTestId('mock-emailinput')).toBeInTheDocument();
    expect(screen.getByTestId('mock-textarea')).toBeInTheDocument();
    expect(screen.getByTestId('mock-submitbutton')).toBeInTheDocument();
  });
});</code></pre>

          <h3 id="testing-data-visualization">Testing Data Visualization</h3>

          <pre><code class="language-typescript">describe('Dashboard', () => {
  beforeEach(async () => {
    await mockModules.mock('recharts', () => ({
      LineChart: createMockComponent('LineChart'),
      BarChart: createMockComponent('BarChart'),
      PieChart: createMockComponent('PieChart'),
      ResponsiveContainer: createMockComponent('ResponsiveContainer')
    }));
  });

  test('renders charts', async () => {
    const { Dashboard } = await import('@/components/Dashboard');
    render(&lt;Dashboard data={mockData} /&gt;);

    expect(screen.getByTestId('mock-linechart')).toBeInTheDocument();
    expect(screen.getByTestId('mock-barchart')).toBeInTheDocument();
    expect(screen.getByTestId('mock-piechart')).toBeInTheDocument();
  });
});</code></pre>

          <h2 id="troubleshooting">Troubleshooting</h2>

          <h3 id="component-not-being-mocked">Component Not Being Mocked</h3>

          <p>
            Ensure the component module is mocked before importing the parent
            component:
          </p>

          <div class="callout callout-error">
            <pre><code class="language-typescript">// ❌ Import before mocking
import { ParentComponent } from '@/components/ParentComponent';

await mockModules.mock('@/components/ChildComponent', () => ({
  default: createMockComponent('ChildComponent')
}));</code></pre>
          </div>

          <div class="callout callout-success">
            <pre><code class="language-typescript">// ✅ Mock before importing
await mockModules.mock('@/components/ChildComponent', () => ({
  default: createMockComponent('ChildComponent')
}));

const { ParentComponent } = await import('@/components/ParentComponent');</code></pre>
          </div>

          <h3 id="mock-not-rendering">Mock Not Rendering</h3>

          <p>
            Mock components return strings, not JSX. For testing, use
            dangerouslySetInnerHTML or test the string directly:
          </p>

          <pre><code class="language-typescript">test('renders mock component', () => {
  const MockComponent = createMockComponent('TestComponent');
  const html = MockComponent({ title: 'Test' });

  // Test the string directly
  expect(html).toContain('data-testid="mock-testcomponent"');

  // Or render as HTML
  render(&lt;div dangerouslySetInnerHTML={{ __html: html }} /&gt;);
  expect(screen.getByTestId('mock-testcomponent')).toBeInTheDocument();
});</code></pre>

          <h3 id="missing-exports">Missing Exports</h3>

          <p>Make sure to mock all exports from a module:</p>

          <pre><code class="language-typescript">// If the module exports multiple components
await mockModules.mock('@/components/forms', () => ({
  TextInput: createMockComponent('TextInput'),
  EmailInput: createMockComponent('EmailInput'),
  default: createMockComponent('DefaultFormComponent') // Don't forget default export
}));</code></pre>

          <div class="page-navigation">
            <a href="hook-mocking.html" class="nav-prev">Hook Mocking</a>
            <a href="graphql-mocking.html" class="nav-next">GraphQL Mocking</a>
          </div>

          <h2 id="see-also">See Also</h2>

          <ul>
            <li>
              <a href="module-mocking.html">Module Mocking</a> - For mocking
              entire modules
            </li>
            <li>
              <a href="hook-mocking.html">Hook Mocking</a> - For mocking React
              hooks
            </li>
            <li>
              <a href="react-components.html">React Components</a> - Examples
              and patterns
            </li>
            <li>
              <a href="testing-patterns.html">Testing Patterns</a> - Advanced
              testing strategies
            </li>
          </ul>
        </div>
      </main>
    </div>

    <script src="js/gitbook.js"></script>
    <script>
      hljs.highlightAll();
    </script>
  </body>
</html>
