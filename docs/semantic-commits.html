<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Semantic Commits - @rageltd/bun-test-utils</title>
    <meta name="description" content="Guide to semantic commits and conventional commit format for contributing to @rageltd/bun-test-utils.">
    <link rel="stylesheet" href="css/gitbook.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/bash.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/typescript.min.js"></script>
</head>
<body>
    <button class="mobile-toggle">☰</button>

    <div class="gitbook-container">
        <aside class="sidebar">
            <div class="sidebar-header">
                <h1 class="sidebar-title"><a href="https://github.com/rageltd/bun-test-utils" target="_blank" rel="noopener noreferrer" style="color: inherit; text-decoration: none;">@rageltd/bun-test-utils</a></h1>
                <p class="sidebar-subtitle">Test utilities for Bun projects</p>
            </div>

            <div class="search-container">
                <input type="text" class="search-input" placeholder="Search documentation...">
            </div>

            <nav class="nav-menu">
                <div class="nav-section">
                    <ul class="nav-subsection">
                        <li class="nav-item">
                            <a href="index.html" class="nav-link">Introduction</a>
                        </li>
                    </ul>
                </div>

                <div class="nav-section">
                    <h3 class="nav-section-title">Getting Started</h3>
                    <ul class="nav-subsection">
                        <li class="nav-item">
                            <a href="installation.html" class="nav-link">Installation</a>
                        </li>
                        <li class="nav-item">
                            <a href="quick-start.html" class="nav-link">Quick Start</a>
                        </li>
                    </ul>
                </div>

                <div class="nav-section">
                    <h3 class="nav-section-title">API Reference</h3>
                    <ul class="nav-subsection">
                        <li class="nav-item">
                            <a href="async-utilities.html" class="nav-link">Async Utilities</a>
                        </li>
                        <li class="nav-item">
                            <a href="mock-utilities.html" class="nav-link">Mock Utilities</a>
                        </li>
                        <li class="nav-item">
                            <a href="hook-mocking.html" class="nav-link">Hook Mocking</a>
                        </li>
                        <li class="nav-item">
                            <a href="component-mocking.html" class="nav-link">Component Mocking</a>
                        </li>
                        <li class="nav-item">
                            <a href="graphql-mocking.html" class="nav-link">GraphQL Mocking</a>
                        </li>
                        <li class="nav-item">
                            <a href="module-mocking.html" class="nav-link">Module Mocking</a>
                        </li>
                        <li class="nav-item">
                            <a href="partial-mocks.html" class="nav-link">Partial Mocks</a>
                        </li>
                        <li class="nav-item">
                            <a href="spy-utilities.html" class="nav-link">Spy Utilities</a>
                        </li>
                        <li class="nav-item">
                            <a href="cleanup-utilities.html" class="nav-link">Cleanup Utilities</a>
                        </li>
                    </ul>
                </div>

                <div class="nav-section">
                    <h3 class="nav-section-title">Guides</h3>
                    <ul class="nav-subsection">
                        <li class="nav-item">
                            <a href="testing-patterns.html" class="nav-link">Testing Patterns</a>
                        </li>
                        <li class="nav-item">
                            <a href="working-with-bun.html" class="nav-link">Working with Bun</a>
                        </li>
                        <li class="nav-item">
                            <a href="common-issues.html" class="nav-link">Common Issues</a>
                        </li>
                        <li class="nav-item">
                            <a href="migration-guide.html" class="nav-link">Migration Guide</a>
                        </li>
                    </ul>
                </div>

                <div class="nav-section">
                    <h3 class="nav-section-title">Examples</h3>
                    <ul class="nav-subsection">
                        <li class="nav-item">
                            <a href="basic-testing.html" class="nav-link">Basic Testing</a>
                        </li>
                        <li class="nav-item">
                            <a href="react-components.html" class="nav-link">React Components</a>
                        </li>
                        <li class="nav-item">
                            <a href="graphql-testing.html" class="nav-link">GraphQL Testing</a>
                        </li>
                        <li class="nav-item">
                            <a href="module-mocking-examples.html" class="nav-link">Module Mocking</a>
                        </li>
                    </ul>
                </div>

                <div class="nav-section">
                    <h3 class="nav-section-title">Contributing</h3>
                    <ul class="nav-subsection">
                        <li class="nav-item">
                            <a href="development-setup.html" class="nav-link">Development Setup</a>
                        </li>
                        <li class="nav-item">
                            <a href="semantic-commits.html" class="nav-link active">Semantic Commits</a>
                        </li>
                        <li class="nav-item">
                            <a href="release-process.html" class="nav-link">Release Process</a>
                        </li>
                    </ul>
                </div>
            </nav>
        </aside>

        <main class="main-content">
            <div class="content-wrapper">
                <h1 id="semantic-commits">Semantic Commits</h1>

                <p>This project uses <a href="https://www.conventionalcommits.org/">Conventional Commits</a> for automated versioning and changelog generation. This guide explains how to write proper commit messages that will trigger appropriate releases.</p>

                <h2 id="why-semantic-commits">Why Semantic Commits?</h2>

                <p>Semantic commits enable:</p>

                <ul>
                    <li><strong>Automated Versioning</strong> - Determine version bumps based on commit types</li>
                    <li><strong>Automatic Changelog</strong> - Generate release notes from commit messages</li>
                    <li><strong>Clear History</strong> - Understand the nature of changes at a glance</li>
                    <li><strong>Release Automation</strong> - Trigger releases without manual intervention</li>
                </ul>

                <h2 id="commit-message-format">Commit Message Format</h2>

                <pre><code class="language-text">&lt;type&gt;[optional scope]: &lt;description&gt;

[optional body]

[optional footer(s)]</code></pre>

                <h3 id="structure-breakdown">Structure Breakdown</h3>

                <ul>
                    <li><strong>Type</strong>: The kind of change (required)</li>
                    <li><strong>Scope</strong>: The area of code affected (optional)</li>
                    <li><strong>Description</strong>: Brief summary of the change (required)</li>
                    <li><strong>Body</strong>: Detailed explanation (optional)</li>
                    <li><strong>Footer</strong>: Breaking changes, issue references (optional)</li>
                </ul>

                <h2 id="commit-types">Commit Types</h2>

                <h3 id="release-triggering-types">Release-Triggering Types</h3>

                <p>These commit types will trigger automated releases:</p>

                <h4 id="fix-patch-release">fix: - Patch Release (1.0.x)</h4>

                <p>Bug fixes that don't change the public API.</p>

                <div class="callout callout-success">
                    <pre><code class="language-bash">fix: resolve mock cleanup issue in module mocker
fix(async): handle timeout edge case in waitFor utility</code></pre>
                </div>

                <h4 id="feat-minor-release">feat: - Minor Release (1.x.0)</h4>

                <p>New features that are backwards compatible.</p>

                <div class="callout callout-success">
                    <pre><code class="language-bash">feat: add createPartialMock utility for type-safe partial mocking
feat(graphql): support lazy query mocking with loading states</code></pre>
                </div>

                <h4 id="breaking-changes-major-release">Breaking Changes - Major Release (x.0.0)</h4>

                <p>Use <code>BREAKING CHANGE:</code> in the footer or <code>!</code> after the type.</p>

                <div class="callout callout-warning">
                    <pre><code class="language-bash">feat!: redesign module mocker API for better type safety

BREAKING CHANGE: createModuleMocker now returns a different interface</code></pre>
                </div>

                <pre><code class="language-bash">refactor: simplify hook mocking interface

BREAKING CHANGE: createMockHook signature has changed from
createMockHook(name, value) to createMockHook(value, options)</code></pre>

                <h3 id="non-release-types">Non-Release Types</h3>

                <p>These types don't trigger releases but are still important:</p>

                <h4 id="docs-documentation">docs: - Documentation</h4>

                <pre><code class="language-bash">docs: add examples for GraphQL testing patterns
docs(api): improve JSDoc comments for async utilities</code></pre>

                <h4 id="style-code-style">style: - Code Style</h4>

                <pre><code class="language-bash">style: fix linting issues in test files
style: update prettier configuration</code></pre>

                <h4 id="refactor-code-refactoring">refactor: - Code Refactoring</h4>

                <pre><code class="language-bash">refactor: extract common test setup logic
refactor(tests): simplify mock creation patterns</code></pre>

                <h4 id="test-adding-tests">test: - Adding Tests</h4>

                <pre><code class="language-bash">test: add edge case tests for module restoration
test(integration): add end-to-end testing scenarios</code></pre>

                <h4 id="chore-maintenance">chore: - Maintenance</h4>

                <pre><code class="language-bash">chore: update dependencies to latest versions
chore(ci): improve GitHub Actions workflow</code></pre>

                <h4 id="perf-performance-improvements">perf: - Performance Improvements</h4>

                <pre><code class="language-bash">perf: optimize mock cleanup performance
perf(async): reduce waitFor overhead</code></pre>

                <h2 id="scopes">Scopes</h2>

                <p>Use scopes to indicate the area of code affected:</p>

                <h3 id="common-scopes">Common Scopes</h3>

                <ul>
                    <li><code>async</code> - Async utilities</li>
                    <li><code>mock</code> - Mock utilities</li>
                    <li><code>hooks</code> - Hook mocking</li>
                    <li><code>graphql</code> - GraphQL utilities</li>
                    <li><code>module</code> - Module mocking</li>
                    <li><code>cleanup</code> - Cleanup utilities</li>
                    <li><code>types</code> - TypeScript types</li>
                    <li><code>docs</code> - Documentation</li>
                    <li><code>ci</code> - Continuous Integration</li>
                    <li><code>deps</code> - Dependencies</li>
                </ul>

                <h3 id="examples-with-scopes">Examples with Scopes</h3>

                <pre><code class="language-bash">feat(async): add timeout option to waitFor function
fix(hooks): resolve type inference in createMockHook
docs(api): add comprehensive examples for all utilities
test(graphql): add tests for error state mocking</code></pre>

                <h2 id="writing-good-commit-messages">Writing Good Commit Messages</h2>

                <h3 id="use-present-tense">1. Use Present Tense</h3>

                <div class="callout callout-success">
                    <pre><code class="language-bash"># ✅ Good
feat: add new utility function</code></pre>
                </div>

                <div class="callout callout-error">
                    <pre><code class="language-bash"># ❌ Avoid
feat: added new utility function
feat: adding new utility function</code></pre>
                </div>

                <h3 id="be-concise-but-descriptive">2. Be Concise but Descriptive</h3>

                <div class="callout callout-success">
                    <pre><code class="language-bash"># ✅ Good
fix: resolve memory leak in module restoration</code></pre>
                </div>

                <div class="callout callout-error">
                    <pre><code class="language-bash"># ❌ Too vague
fix: fix bug

# ❌ Too verbose
fix: resolve the memory leak that occurs when restoring modules in certain edge cases where cleanup is not properly handled</code></pre>
                </div>

                <h3 id="use-imperative-mood">3. Use Imperative Mood</h3>

                <p>Write as if giving a command:</p>

                <div class="callout callout-success">
                    <pre><code class="language-bash"># ✅ Good
feat: add support for async hook mocking
fix: prevent mock pollution between tests</code></pre>
                </div>

                <div class="callout callout-error">
                    <pre><code class="language-bash"># ❌ Avoid
feat: adds support for async hook mocking
fix: prevents mock pollution between tests</code></pre>
                </div>

                <h3 id="include-context-in-body">4. Include Context in Body</h3>

                <p>For complex changes, use the body to explain why:</p>

                <pre><code class="language-bash">feat: add createPartialMock utility

This utility allows creating type-safe partial mocks of complex objects,
which is particularly useful when testing components that depend on
large configuration objects or API responses where only a subset of
properties are relevant to the test.</code></pre>

                <h2 id="breaking-changes">Breaking Changes</h2>

                <h3 id="when-to-use-breaking-changes">When to Use Breaking Changes</h3>

                <ul>
                    <li>Changing function signatures</li>
                    <li>Removing public APIs</li>
                    <li>Changing default behavior</li>
                    <li>Renaming exported functions/classes</li>
                </ul>

                <h3 id="how-to-document-breaking-changes">How to Document Breaking Changes</h3>

                <pre><code class="language-bash">feat!: redesign module mocking API

BREAKING CHANGE: The createModuleMocker function now returns an object
with different method names:
- mockModule() is now mock()
- restoreModule() is now restore()
- restoreAllModules() is now restoreAll()

Migration guide:
```typescript
// Before
const mocker = createModuleMocker();
await mocker.mockModule('@/hooks', () => ({}));
mocker.restoreModule('@/hooks');
mocker.restoreAllModules();

// After
const mocker = createModuleMocker();
await mocker.mock('@/hooks', () => ({}));
mocker.restore('@/hooks');
mocker.restoreAll();
```</code></pre>

                <h2 id="using-the-interactive-commit-tool">Using the Interactive Commit Tool</h2>

                <p>This project includes an interactive commit tool to help you write proper commits:</p>

                <pre><code class="language-bash">bun run commit</code></pre>

                <div class="callout callout-info">
                    <p>The tool will:</p>
                    <ol>
                        <li></ol><strong>Prompt for commit type</strong> - Choose from available types</li>
                        <li><strong>Ask for scope</strong> - Select affected area (optional)</li>
                        <li><strong>Request description</strong> - Write a brief summary</li>
                        <li><strong>Allow detailed body</strong> - Add explanation if needed</li>
                        <li><strong>Handle breaking changes</strong> - Mark and describe breaking changes</li>
                        <li><strong>Reference issues</strong> - Link to GitHub issues</li>
                    </ol>
                </div>

                <h3 id="example-interactive-session">Example Interactive Session</h3>

                <pre><code class="language-text">? Select the type of change you're committing: feat
? What is the scope of this change? (press enter to skip): async
? Write a short, imperative description: add timeout support to waitFor
? Provide a longer description: (press enter to skip)
? Are there any breaking changes? No
? Does this change affect any open issues? (press enter to skip)

Generated commit message:
feat(async): add timeout support to waitFor</code></pre>

                <h2 id="examples">Examples</h2>

                <h3 id="feature-addition">Feature Addition</h3>

                <pre><code class="language-bash">feat(graphql): add support for subscription mocking

Add createMockSubscription utility that handles GraphQL subscription
mocking with proper cleanup and error simulation.

Closes #123</code></pre>

                <h3 id="bug-fix">Bug Fix</h3>

                <pre><code class="language-bash">fix(module): prevent duplicate module restoration

Fixes issue where calling restoreAll() multiple times would attempt
to restore already restored modules, causing test failures.

Fixes #456</code></pre>

                <h3 id="breaking-change">Breaking Change</h3>

                <pre><code class="language-bash">feat!: simplify hook mocking API

BREAKING CHANGE: createMockHook now accepts options as second parameter
instead of separate arguments. This provides better type safety and
extensibility.

Before: createMockHook('useUser', userData, { persist: true })
After: createMockHook('useUser', { returnValue: userData, persist: true })</code></pre>

                <h3 id="documentation">Documentation</h3>

                <pre><code class="language-bash">docs: add comprehensive testing patterns guide

Include examples for:
- Module mocking best practices
- Hook testing strategies
- GraphQL operation mocking
- Async testing patterns</code></pre>

                <h2 id="validation">Validation</h2>

                <h3 id="pre-commit-hooks">Pre-commit Hooks</h3>

                <p>The project uses <a href="https://github.com/evilmartians/lefthook">Lefthook</a> to validate commit messages:</p>

                <ul>
                    <li><strong>Format validation</strong> - Ensures conventional commit format</li>
                    <li><strong>Type validation</strong> - Verifies valid commit types</li>
                    <li><strong>Length limits</strong> - Enforces reasonable message lengths</li>
                </ul>

                <h3 id="ci-validation">CI Validation</h3>

                <p>GitHub Actions also validate commit messages on pull requests to ensure consistency across the project.</p>

                <h2 id="best-practices">Best Practices</h2>

                <h3 id="one-logical-change-per-commit">1. One Logical Change Per Commit</h3>

                <div class="callout callout-success">
                    <pre><code class="language-bash"># ✅ Good - single focused change
feat: add createSpy utility for method spying</code></pre>
                </div>

                <div class="callout callout-error">
                    <pre><code class="language-bash"># ❌ Avoid - multiple unrelated changes
feat: add createSpy utility and fix documentation and update dependencies</code></pre>
                </div>

                <h3 id="commit-frequently">2. Commit Frequently</h3>

                <p>Make small, incremental commits rather than large monolithic ones:</p>

                <pre><code class="language-bash">feat: add basic spy utility structure
feat: implement spy creation logic
feat: add spy cleanup functionality
test: add comprehensive spy utility tests
docs: document spy utility API</code></pre>

                <h3 id="test-before-committing">3. Test Before Committing</h3>

                <p>Ensure your changes work:</p>

                <pre><code class="language-bash"># Run tests
bun test

# Run linting
bun run lint

# Then commit
git add .
bun run commit</code></pre>

                <h3 id="link-to-issues">4. Link to Issues</h3>

                <p>Reference GitHub issues when relevant:</p>

                <pre><code class="language-bash">fix: resolve mock restoration timing issue

Fixes #789
Closes #790</code></pre>

                <h2 id="common-mistakes">Common Mistakes</h2>

                <h3 id="wrong-commit-type">1. Wrong Commit Type</h3>

                <div class="callout callout-error">
                    <pre><code class="language-bash"># ❌ Wrong - this is a feature, not a fix
fix: add new utility function</code></pre>
                </div>

                <div class="callout callout-success">
                    <pre><code class="language-bash"># ✅ Correct
feat: add new utility function</code></pre>
                </div>

                <h3 id="missing-breaking-change-notation">2. Missing Breaking Change Notation</h3>

                <div class="callout callout-error">
                    <pre><code class="language-bash"># ❌ Wrong - breaking change not marked
refactor: change module mocker API</code></pre>
                </div>

                <div class="callout callout-success">
                    <pre><code class="language-bash"># ✅ Correct
refactor!: change module mocker API

BREAKING CHANGE: Method signatures have changed</code></pre>
                </div>

                <h3 id="unclear-descriptions">3. Unclear Descriptions</h3>

                <div class="callout callout-error">
                    <pre><code class="language-bash"># ❌ Unclear
fix: fix thing</code></pre>
                </div>

                <div class="callout callout-success">
                    <pre><code class="language-bash"># ✅ Clear
fix(async): resolve timeout handling in waitFor utility</code></pre>
                </div>

                <h2 id="resources">Resources</h2>

                <ul></ul>
                    <li><a href="https://www.conventionalcommits.org/">Conventional Commits Specification</a></li>
                    <li><a href="https://semver.org/">Semantic Versioning</a></li>
                    <li><a href="https://github.com/angular/angular/blob/main/CONTRIBUTING.md#commit">Angular Commit Guidelines</a></li>
                    <li><a href="https://github.com/commitizen/cz-cli">Commitizen</a> - Command line utility</li>
                </ul>

                <h2 id="getting-help">Getting Help</h2>

                <p>If you're unsure about commit message formatting:</p>

                <ol>
                    <li>Use the interactive tool: <code>bun run commit</code></li>
                    <li>Check recent commits for examples: <code>git log --oneline</code></li>
                    <li>Ask in pull request discussions</li>
                    <li>Refer to this guide and the conventional commits specification</li>
                </ol>

                <div class="page-navigation">
                    <a href="development-setup.html" class="nav-prev">Development Setup</a>
                    <a href="release-process.html" class="nav-next">Release Process</a>
                </div>
            </div>
        </main>
    </div>

    <script src="js/gitbook.js"></script>
    <script>
        hljs.highlightAll();
    </script>
</body>
</html>
